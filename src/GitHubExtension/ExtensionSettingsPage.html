<!DOCTYPE html>
<html>
<head>
    <title>Extension Settings Page Demo</title>
    <script>
        "use strict";

        var lightMode = "rgb(243, 243, 243)";
        var darkMode = "rgb(32, 32, 32)";

        function changeTheme() {
            var body = document.getElementById("body");
            console.log(body.style.backgroundColor);

            if (body.style.backgroundColor == lightMode) {
                body.style.backgroundColor = darkMode;
                document.getElementsByTagName("h1")[0].style.color = lightMode;
            } else {
                body.style.backgroundColor = lightMode;
                document.getElementsByTagName("h1")[0].style.color = darkMode;
            }
        };

        function doPostMessage(message) {
            // Do different things in WebView2 vs the browser, so neither gets an error
            try {
                window.chrome.webview.postMessage(message);
                console.log("window.chrome");
            }
            catch {
                window.postMessage(message);
                console.log("window")
            }
        };

        function onGotFocus(x) {
            var output = (x.id) ? x.id : x;
            doPostMessage("Focus on: " + output);
            console.log("Focus on: " + output);
        };

        function onFocusOut() {
            if (!document.hasFocus()) {
                doPostMessage("Focus on: document lost focus");
                console.log("Focus on: document lost focus");
            }
        };

        function navigateToNextPage() {
            window.location.assign('ExtensionSettingsPage2');
        };

        function devHomeGetNumberOfPages() {
            var numPages = 3;
            var obj = new Object();
            obj.devHomeItemUpdated = "devHomeNumberOfPages";
            obj.devHomeNumberOfPages = 3;
            obj.devHomeFormCompleted = false;
            var jsonStr = JSON.stringify(obj);
            doPostMessage(jsonStr);
            console.log(jsonStr);
        };
    </script>
</head>
<body id="body" onload="devHomeGetNumberOfPages()" style="background:rgb(243, 243, 243)">
    <h1> Extension Settings Page Demo </h1>
    <img id="cat" src="cat.jpg" style="width:500px; height:500px" />
    <input id="b1A" type="submit" name="button" onclick="changeTheme()" value="Change Theme" />
    <input id="b1B" type="submit" name="button" onclick="navigateToNextPage()" value="Check out a cute dog" />
</body>
</html>